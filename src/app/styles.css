@import 'tailwindcss';

@theme {
  --color-app-theme: var(--theme-color);
  --color-backdrop: var(--backdrop);
  --color-ring-theme: var(--ring-theme);

  --color-content-primary: var(--content-primary);
  --color-content-secondary: var(--content-secondary);
  --color-content-tertiary: var(--content-tertiary);
  --color-content-disabled: var(--content-disabled);

  --color-surface-primary: var(--surface-primary);
  --color-surface-secondary: var(--surface-secondary);
  --color-surface-tertiary: var(--surface-tertiary);
  --color-surface-hover: var(--surface-hover);
  --color-surface-muted: var(--surface-muted);

  --color-border-primary: var(--border-primary);
  --color-border-secondary: var(--border-secondary);

  --color-accent-bg: var(--accent-bg);
  --color-accent-bg-hover: var(--accent-bg-hover);
  --color-accent-fg: var(--accent-fg);

  --color-danger-bg: var(--danger-bg);
  --color-danger-bg-hover: var(--danger-bg-hover);
  --color-danger-fg: var(--danger-fg);
  --color-danger-border: var(--danger-border);

  --color-warning-bg: var(--warning-bg);
  --color-warning-fg: var(--warning-fg);
  --color-warning-border: var(--warning-border);

  --color-success-bg: var(--success-bg);
  --color-success-fg: var(--success-fg);
  --color-success-border: var(--success-border);

  --color-info-bg: var(--info-bg);
  --color-info-fg: var(--info-fg);
  --color-info-border: var(--info-border);

  --color-favorite-fg: var(--favorite-fg);
  --color-favorite-fg-hover: var(--favorite-fg-hover);

  --color-highlight-bg: var(--highlight-bg);
  --color-highlight-fg: var(--highlight-fg);

  --animate-slide-in-up: slideInUp 0.35s cubic-bezier(0.215, 0.61, 0.355, 1) forwards;
  --animate-fade-out: fadeOut 0.4s ease-out forwards;
  --animate-fade-in: fadeIn 0.15s ease-out forwards;
  --animate-fade-out-modal: fadeOutModal 0.2s ease-in forwards;
  --animate-scale-up: scaleUp 0.2s ease-out forwards;
  --animate-scale-down: scaleDown 0.2s ease-in forwards;
  --animate-fade-in-text: fadeInText 0.4s ease-out forwards;

  @keyframes slideInUp {
    from {
      opacity: 0;
      transform: translateY(30px) scale(0.95);
    }
    to {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }
  @keyframes fadeOut {
    from {
      opacity: 1;
    }
    to {
      opacity: 0;
    }
  }
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
  @keyframes fadeOutModal {
    from {
      opacity: 1;
    }
    to {
      opacity: 0;
    }
  }
  @keyframes scaleUp {
    from {
      opacity: 0;
      transform: scale(0.97) translateY(8px);
    }
    to {
      opacity: 1;
      transform: scale(1) translateY(0);
    }
  }
  @keyframes scaleDown {
    from {
      opacity: 1;
      transform: scale(1) translateY(0);
    }
    to {
      opacity: 0;
      transform: scale(0.97) translateY(8px);
    }
  }
  @keyframes fadeInText {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  @keyframes progressBarDecrease {
    from {
      transform: scaleX(1);
    }
    to {
      transform: scaleX(0);
    }
  }
}

:root {
  --theme-color: #0f172a;
  --backdrop: rgba(15, 23, 42, 0.7);
  --ring-theme: #0284c7; /* sky-600 */
  --content-primary: #f1f5f9; /* slate-100 */
  --content-secondary: #e2e8f0; /* slate-200 */
  --content-tertiary: #94a3b8; /* slate-400 */
  --content-disabled: #64748b; /* slate-500 */
  --surface-primary: #0f172a; /* slate-900 */
  --surface-secondary: #1e293b; /* slate-800 */
  --surface-tertiary: #334155; /* slate-700 */
  --surface-hover: #475569; /* slate-600 */
  --surface-muted: rgba(51, 65, 85, 0.5); /* slate-700/50 */
  --border-primary: #475569; /* slate-600 */
  --border-secondary: #64748b; /* slate-500 */
  --accent-bg: #0ea5e9; /* sky-500 */
  --accent-bg-hover: #0284c7; /* sky-600 */
  --accent-fg: #ffffff;
  --danger-bg: rgba(239, 68, 68, 0.5); /* red-500/50 */
  --danger-bg-hover: rgba(239, 68, 68, 0.2); /* red-500/20 */
  --danger-fg: #f87171; /* red-400 */
  --danger-border: #ef4444; /* red-500 */
  --warning-bg: rgba(245, 158, 11, 0.5); /* yellow-500/50 */
  --warning-fg: #fbbf24; /* yellow-400 */
  --warning-border: #f59e0b; /* yellow-500 */
  --success-bg: rgba(16, 185, 129, 0.5); /* green-500/50 */
  --success-fg: #4ade80; /* green-400 */
  --success-border: #10b981; /* green-500 */
  --info-bg: rgba(14, 165, 233, 0.5); /* sky-500/50 */
  --info-fg: #38bdf8; /* sky-400 */
  --info-border: #0ea5e9; /* sky-500 */
  --scrollbar-thumb: #475569;
  --scrollbar-thumb-hover: #64748b;
  --favorite-fg: #fbbf24; /* yellow-400 */
  --favorite-fg-hover: #fcd34d; /* yellow-300 */
  --highlight-bg: rgba(245, 158, 11, 0.3); /* yellow-500/30 */
  --highlight-fg: #fde68a; /* yellow-200 */
}

.light {
  --theme-color: #fff8f1;
  --backdrop: rgba(fff8f1, 0.7);
  --ring-theme: #fb923c; /* orange-400 */
  --content-primary: #78350f; /* amber-900 */
  --content-secondary: #92400e; /* amber-800 */
  --content-tertiary: #d97706; /* amber-600 */
  --content-disabled: #f59e0b; /* amber-500 */
  --surface-primary: #fff8f1; /* amber-100 adjusted */
  --surface-secondary: #fef3c7; /* amber-200 */
  --surface-tertiary: #fde68a; /* amber-300 */
  --surface-hover: #fbbf24; /* amber-400 */
  --surface-muted: rgba(fde68a, 0.5); /* amber-300/50 */
  --border-primary: #fbbf24; /* amber-400 */
  --border-secondary: #f59e0b; /* amber-500 */
  --accent-bg: #f97316; /* orange-500 */
  --accent-bg-hover: #fb923c; /* orange-400 */
  --accent-fg: #000000;
  --danger-bg: rgba(220, 38, 38, 0.5); /* red-600/50 */
  --danger-bg-hover: rgba(220, 38, 38, 0.2); /* red-600/20 */
  --danger-fg: #ef4444; /* red-500 */
  --danger-border: #dc2626; /* red-600 */
  --warning-bg: rgba(217, 119, 6, 0.5); /* yellow-600/50 */
  --warning-fg: #f59e0b; /* yellow-500 */
  --warning-border: #d97706; /* yellow-600 */
  --success-bg: rgba(22, 163, 74, 0.5); /* green-600/50 */
  --success-fg: #22c55e; /* green-500 */
  --success-border: #16a34a; /* green-600 */
  --info-bg: rgba(249, 115, 22, 0.5); /* orange-500/50 */
  --info-fg: #ea580c; /* orange-600 */
  --info-border: #f97316; /* orange-500 */
  --scrollbar-thumb: #fcd5b2;
  --scrollbar-thumb-hover: #fdba74;
  --favorite-fg: #d97706; /* yellow-600 */
  --favorite-fg-hover: #b45309; /* yellow-700 */
  --highlight-bg: rgba(fbbf24, 0.4); /* amber-400/40 */
  --highlight-fg: #451a03; /* amber-950 */
}

@layer base {
  html {
    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
    scrollbar-width: thin;
    scrollbar-color: var(--scrollbar-thumb) transparent;
  }

  body {
    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
    font-family: 'Inter', sans-serif;
    overflow: hidden;
    line-height: 1.6;
    transition:
      background-color 0.3s ease,
      color 0.3s ease;
    background-color: var(--surface-primary);
    color: var(--content-primary);
  }

  #root {
    width: 100%;
    height: 100%;
  }

  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    background: transparent;
    border-right: inset -4px 0 0 0 transparent;
  }

  ::-webkit-scrollbar-thumb {
    background: var(--scrollbar-thumb);
    border-radius: 4px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: var(--scrollbar-thumb-hover);
  }

  ::-webkit-scrollbar-button {
    display: none;
    width: 0;
    height: 0;
  }

  input[type='search']::-webkit-search-cancel-button {
    -webkit-appearance: none;
    display: none;
  }
}

@layer components {
  /* Layout & Panels */
  .main-layout-root {
    @apply flex h-full w-full flex-col gap-3 p-3 md:flex-row md:overflow-hidden;
  }

  .main-content-wrapper {
    @apply h-full w-full overflow-hidden transition-opacity duration-300;
  }

  .section-column {
    @apply flex w-full flex-col gap-3 md:flex-1 md:overflow-hidden;
  }

  .panel-container {
    @apply flex w-full flex-col overflow-hidden rounded-lg bg-surface-secondary transition-all duration-300;
  }

  .panel-header {
    @apply flex h-12 shrink-0 items-center justify-between border-b border-border-primary bg-surface-tertiary px-2 text-content-primary;
  }

  .panel-header-title {
    @apply min-w-0 truncate pr-2 font-semibold text-lg;
  }

  .panel-header-actions {
    @apply flex shrink-0 items-center gap-1;
  }

  .panel-content {
    @apply grow overflow-auto p-3;
  }

  .panel-half-height {
    @apply h-[50vh] min-h-0 md:h-1/2;
  }

  .panel-full-height-flex {
    @apply h-[50vh] min-h-0 md:h-auto md:flex-1;
  }

  /* Form & Inputs */
  .input-base {
    @apply w-full rounded-md border border-border-primary bg-surface-tertiary text-content-primary placeholder:text-content-tertiary outline-none transition-all duration-150 ease-in-out disabled:cursor-not-allowed disabled:opacity-50;
  }

  .input-base-padding {
    @apply py-2 px-2;
  }

  .label-base {
    @apply font-medium text-sm text-content-secondary;
  }

  /* Buttons */
  .btn-base {
    @apply inline-flex items-center justify-center font-medium border outline-none transition-all duration-150 ease-in-out disabled:cursor-not-allowed disabled:opacity-50;
  }

  .btn-primary {
    @apply border-transparent bg-accent-bg text-accent-fg hover:bg-accent-bg-hover;
  }

  .btn-secondary {
    @apply border-transparent bg-surface-tertiary text-content-secondary hover:bg-surface-hover hover:text-content-primary;
  }

  .btn-danger {
    @apply border-danger-border bg-transparent text-danger-fg hover:bg-danger-bg-hover;
  }

  .btn-outline {
    @apply border-border-primary bg-transparent text-content-secondary hover:border-border-secondary hover:bg-surface-muted;
  }

  .btn-stealth {
    @apply border-transparent bg-transparent text-content-tertiary hover:bg-surface-muted hover:text-content-primary;
  }

  .btn-xs {
    @apply p-1 text-xs;
  }

  .btn-sm {
    @apply p-2 text-sm;
  }

  .btn-lg {
    @apply p-3 text-base;
  }

  /* Lists & Items */
  .list-item-container {
    @apply flex h-12 w-full items-center justify-between rounded-md p-2 transition-colors duration-150 bg-surface-tertiary hover:bg-surface-muted;
  }

  .list-item-title {
    @apply block truncate pr-2 text-sm transition-colors duration-150 outline-none;
  }

  .list-item-interactive {
    @apply cursor-default group-hover:text-info-fg;
  }

  .list-item-actions {
    @apply flex shrink-0 items-center gap-1;
  }

  .recipe-item {
    @apply flex w-full flex-col rounded-md transition-colors duration-200 ease-in-out bg-surface-tertiary h-auto min-h-12;
  }

  .recipe-item-grab-handle {
    @apply mr-2 cursor-grab text-content-tertiary transition-colors group-hover:text-content-secondary;
  }

  .empty-view-container {
    @apply flex flex-col items-center justify-center p-3 text-center gap-1;
  }

  .empty-view-title {
    @apply font-semibold text-lg text-content-secondary;
  }

  .empty-view-text {
    @apply w-full break-words text-sm text-content-tertiary;
  }

  .empty-view-icon {
    @apply mb-1 text-content-tertiary;
  }

  .tooltip-base {
    @apply z-[1000] max-w-xs p-2 whitespace-pre-line rounded-md font-medium text-sm shadow-lg transition-opacity duration-150 bg-backdrop text-accent-fg;
  }

  .highlight-mark {
    @apply rounded px-1 bg-highlight-bg text-highlight-fg;
  }

  .notification-item {
    @apply relative w-full overflow-hidden rounded-lg border-l-4 bg-surface-secondary shadow-lg;
  }

  .info-message-box {
    @apply rounded-md border border-border-secondary bg-surface-hover p-2 text-center text-xs italic;
  }

  .missing-item-container {
    @apply flex flex-col rounded-md bg-danger-bg text-sm outline-none;
  }

  .missing-item-header {
    @apply flex w-full items-center justify-between p-2;
  }

  .missing-item-title {
    @apply truncate pr-2 font-medium text-danger-fg;
  }

  .missing-item-text {
    @apply mt-1 px-2 pb-2 text-xs text-danger-fg;
  }

  .input-textarea-container {
    @apply relative flex overflow-hidden rounded-md border border-border-primary bg-surface-secondary;
  }

  .input-textarea-gutter {
    @apply shrink-0 p-2 overflow-hidden select-none text-right border-r text-content-tertiary bg-surface-secondary border-border-primary;
  }

  .input-textarea-element {
    @apply h-full w-full resize-none bg-transparent p-2 font-mono text-content-primary outline-none select-text placeholder:text-content-tertiary transition-all duration-150 ease-in-out;
  }

  .input-boolean-container {
    @apply relative inline-flex items-center cursor-pointer;
  }

  .input-boolean-switch {
    @apply relative h-6 w-11 rounded-full border border-border-primary bg-surface-tertiary outline-none transition-colors after:absolute after:top-1/2 after:left-[1px] after:h-5 after:w-5 after:-translate-y-1/2 after:rounded-full after:border after:border-border-secondary after:bg-white after:transition-all after:content-[''] peer-checked:border-accent-bg peer-checked:bg-accent-bg! peer-checked:after:translate-x-[20px] peer-disabled:opacity-50;
  }

  .input-number-container {
    @apply relative flex items-center;
  }

  .input-number-button-group {
    @apply absolute top-1 right-1 flex h-[calc(100%-8px)] w-6 flex-col rounded-r-md border-l bg-surface-tertiary border-border-primary;
  }

  .input-number-button {
    @apply flex h-1/2 w-full shrink-0 items-center justify-center transition-colors text-content-tertiary hover:bg-surface-muted hover:text-content-primary disabled:cursor-not-allowed disabled:text-content-disabled;
  }

  .input-select-option {
    @apply bg-surface-secondary text-content-secondary;
  }

  /* Scrollbar Utilities */
  .scrollbar-hidden {
    -ms-overflow-style: none;
    scrollbar-width: none;
    &::-webkit-scrollbar {
      display: none;
    }
  }

  .allow-text-selection {
    -webkit-user-select: text;
    -ms-user-select: text;
    user-select: text;

    &.textarea::placeholder {
      -webkit-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }
  }

  /* Animation Hooks */
  .notification-enter-active {
    animation: var(--animate-slide-in-up);
  }

  .notification-exit-active {
    animation: var(--animate-fade-out);
  }

  .progress-bar-fill {
    transform-origin: left;
    animation-name: progressBarDecrease;
    animation-timing-function: linear;
    animation-fill-mode: forwards;
  }

  .notification-paused .progress-bar-fill {
    animation-play-state: paused;
  }

  .fade-in-text {
    animation: var(--animate-fade-in-text);
  }

  .modal-backdrop-enter-active {
    animation: var(--animate-fade-in);
  }

  .modal-backdrop-exit-active {
    animation: var(--animate-fade-out-modal);
  }

  .modal-content-enter-active {
    animation: var(--animate-scale-up);
  }

  .modal-content-exit-active {
    animation: var(--animate-scale-down);
  }

  .modal-sm {
    @apply max-w-md;
  }
  .modal-md {
    @apply max-w-lg;
  }
  .modal-lg {
    @apply max-w-xl;
  }
  .modal-xl {
    @apply max-w-2xl;
  }
  .modal-xxl {
    @apply max-w-4xl;
  }
  .modal-full {
    @apply max-w-full sm:h-[90vh] sm:max-h-[90vh];
  }

  .modal-header-title {
    @apply grow truncate pr-2 font-semibold text-xl;
  }

  .modal-header-actions-wrapper {
    @apply flex shrink-0 items-center gap-2;
  }

  .modal-body {
    @apply flex min-h-0 flex-1 flex-col overflow-hidden p-3;
  }

  /* Screens & Large Views */
  .loading-screen-container {
    @apply fixed inset-0 z-[900] flex flex-col items-center justify-center bg-surface-primary transition-opacity duration-300;
  }

  .loading-screen-title {
    @apply mt-3 text-2xl font-semibold tracking-wider;
  }

  .tab-nav {
    @apply flex gap-1 border-b border-border-primary;
  }

  .tab-button {
    @apply rounded-t-md border-b-2 p-2 text-sm font-medium outline-none transition-colors duration-150;
  }

  .tab-button-active {
    @apply border-info-border text-info-fg;
  }

  .tab-button-inactive {
    @apply border-transparent text-content-tertiary hover:bg-surface-muted hover:text-content-primary;
  }

  .tab-content-wrapper {
    @apply flex min-h-0 flex-1 flex-col pt-3;
  }

  .tab-panel {
    @apply flex h-full flex-col gap-3;
  }

  .tab-panel-hidden {
    @apply hidden;
  }

  .error-view-details {
    @apply max-h-48 mt-3 p-2 overflow-y-auto rounded-md text-left text-xs bg-surface-tertiary transition-all duration-300;
  }

  .error-view-summary {
    @apply font-medium cursor-pointer text-content-tertiary hover:text-content-primary;
  }

  .error-view-pre {
    @apply mt-2 whitespace-pre-wrap text-content-secondary;
  }

  .flex-center {
    @apply flex items-center justify-center;
  }

  .flex-between {
    @apply flex items-center justify-between;
  }

  .flex-col-center {
    @apply flex flex-col items-center justify-center;
  }

  .flex-y-center {
    @apply flex items-center;
  }

  .status-error {
    @apply border-l-4 border-danger-border;
  }
  .status-success {
    @apply border-l-4 border-success-border;
  }
  .status-warning {
    @apply border-l-4 border-warning-border;
  }

  .accordion-grid {
    @apply grid grid-rows-[0fr] overflow-hidden transition-[grid-template-rows] duration-300 ease-in-out;
    &.expanded {
      @apply grid-rows-[1fr];
    }
  }

  .accordion-content {
    overflow: hidden;
    min-height: 0;
  }

  .number-input-no-spinner {
    -moz-appearance: textfield;
    &::-webkit-outer-spin-button,
    &::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }
  }

  .dropzone-add {
    @apply border-info-border bg-info-bg text-info-fg;
  }

  .dropzone-remove {
    @apply border-danger-border bg-danger-bg text-danger-fg;
  }

  .dropzone-overlay {
    @apply pointer-events-none absolute inset-0 z-10 p-3;
  }

  .dropzone-placeholder {
    @apply h-14 text-sm;
  }
}

@layer utilities {
  .grabbing,
  .grabbing * {
    cursor: grabbing !important;
  }

  [draggable='true']:hover {
    cursor: grab;
  }

  [draggable='true']:active {
    cursor: grabbing;
  }
}
